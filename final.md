# 2025春季开源操作系统训练营

## 学习背景

在进行网络编程的时候，如果要提高程序的并发性能会用到 io 多路复用和协程，很多框架和语言都会有自己的实现，在逐渐深入的过程中，就会提出一些问题：

- io 多路复用 select、epoll、io_uring 是如何做到可以提高并发性的
- 阻塞和非阻塞又是如何做到的
- 到底什么是同步什么是异步
- 协程底层是如何实现的

这些问题虽然网上有很多资料，但如果自己不亲自去写一些 case 去验证，感觉是很难理解透彻的。而这些技术的实现都是直接或者间接的依赖操作系统才可以做到，也就是说要理解这些知识点，那就必须要学操作系统的知识。

正好我也在模仿着想实现一个协程框架(有栈的)，发现要用到汇编知识，发现写操作系统也需要汇编知识，于是顺手查了下比较好的操作系统课程：

- 南京大学的操作系统
- 清华大学操作系统 - ucore & rcore
- MIT xv6 操作系统

在 B 站上看到有人分享参加了开源操作系统训练营，于是便在今年 1 月份就定计划要专供下操作系统的知识了，也算是补上十多年前没学好的专业课吧(出来混，早晚都要还的)

另外，也想通过这次的学习，寻找一些志同道合的朋友，一起进步。

## 学习仓库

跟着老师和同学们一起学习用的代码仓库，里面包含了每次作业的提交内容

- [rustling](https://github.com/LearningOS/2025s-rustling-CreatorMetaSky)
- [rcore](https://github.com/LearningOS/2025s-rcore-CreatorMetaSky)
- [ucore](https://github.com/LearningOS/2025s-arceos-CreatorMetaSky)
- [学习笔记](https://github.com/osxspace/qhos) - 记录的有些凌乱

## 各阶段学习内容总结

### 第一阶段 rustling

rustling 很久之前曾经刷过一遍了，这次是温故知新，复习了以下知识点：

- rust 的基本语法
- 模式匹配
- 所有权转移
- 容器智能指针
- 包管理机制
- 使用 async await

### 第二阶段 rcore

在学习 rcore 的过程中，首先通读了一遍 [rCore-Tutorial-Guide](https://learningos.cn/rCore-Tutorial-Guide-2025S)， 发现其中大部分章节只是罗列了代码的改动，对于基础知识原理，并没有过多的介绍。
又开始阅读学习 [rCore-Book](https://rcore-os.cn/rCore-Tutorial-Book-v3)，后续配合陈渝老师导学阶段的视频(2022年教学视频)，才逐渐走上了学习的正轨。学到了以下知识：

**构建操作系统的步骤**

- env setup - 模拟器搭建裸机运行环境
- libos - 在内核上跑一个最简单的程序
- batchos - 支持批量运行多个程序 - 引入特权级机制
- taskos - 实现分时多任务执行
- asos - 地址空间以及映射
- pos - 进程
- fos - 文件系统
- ipcos - 进程建通信
- tcos - 线程、协程

**操作系统内核核心组件**

- 地址空间
- 进程管理和切换
- 文件系统

**学到的具体知识点**

- 程序的内存布局结构、如何通过 linker.ld 去修改程序布局
- 页表机制以及虚拟地址到物理地址的映射方式
- 进程的协作式调度和抢占式调度以及不同的调度算法的历史演进
- 文件系统 inode 的结构组织方式，为深入理解一切皆 io 打下基础
- 从进程发展的历史的角度去理解 fork exec spawn
- 进程间通信 pipe 和 shell
- 从操作系统源码深入的理解进程、线程、绿色线程以及他们如何配置的
- 理解锁、同步的概念

通过上述知识的学习，终于明白了操作系统是为上层应用开发提供硬件抽象的一种系统软件实现，也为我揭开了操作系统的神秘面纱

### arceos 学习内容

- arceos 跟 rcore 其实都是一样的思路
- [ ] 查看 PPT
- [ ] 整理 qhos 仓库
- 拆分的更加细粒度 - 方便组装 - 更像现在前端和移动端开发的那种 分久必合、合久比分 - 也不知道谁对谁错，因人而宜吧

## 学习方法

### 从陈愈老师的视频中学到

- what - 是什么
- when - 什么时候
- how - 如何用
- why - 为什么要用
- build - 自己做一个

不断地向自己提问题是最好的学习方式

## 学习记录

- 微信群里一些有用信息的保存记录
- 上课的一些简单笔记

## 不足和缺陷

- 只是走马观花的看了一遍 - 也就是基本能把代码看懂的水平

## 帮助理解

- 操作系统的启动流程
- 中断和崩溃信号量机制的实现
- 内存分配和管理机制
- IO 多路复用技术
- 协程以及调度实现
- 各种锁的实现原理
- ringbuffer | lru

## 展望

- 希望能自己跟随老师的步伐自己写一个才做系统内核